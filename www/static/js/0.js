webpackJsonp([0],{380:function(e,t,n){n(465);var a=n(8)(n(413),n(447),"data-v-255f9644",null);a.options.__file="/Users/luxueyan/mine/github/fn-h5-frontend/src/views/borrow/BorrowerInfo.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] BorrowerInfo.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},387:function(e,t,n){"use strict";function a(e){return{idCard:e.Idcard,cardName:e.Cardname,bankCard:e.Bankcard,bankPhone:e.Bankphone,bank:e.Bankname,loanAmount:e.Loanamount,totalAmount:e.Totalamount,endDate:o()(e.Enddate).format("YYYY年MM月DD日"),startDate:o()(e.Startdate).format("YYYY年MM月DD日")}}t.a=a;var r=n(0),o=n.n(r)},388:function(e,t,n){"use strict";var a=n(70),r=n.n(a),o=r.a.Validator;t.a={methods:{Validator:o,validate:o.value,getFieldState:function(e){return this.validation.hasError(e)?"error":this.validation.isPassed(e)?"success":""},showFieldError:function(e,t){var n=e.target;n.classList.contains("mintui-field-error")&&n.parentNode.classList.contains("mint-field-state")&&this.$toast(this.validation.firstError(t),"error")}}}},389:function(e,t,n){"use strict";t.a={bind:function(e,t,n){var a=function(t){n.context&&!e.contains(t.target)&&n.context[e["@@clickoutsideContext"].methodName]()};e["@@clickoutsideContext"]={documentHandler:a,methodName:t.expression,arg:t.arg||"click"},document.addEventListener(e["@@clickoutsideContext"].arg,a)},update:function(e,t){e["@@clickoutsideContext"].methodName=t.expression},unbind:function(e){document.removeEventListener(e["@@clickoutsideContext"].arg,e["@@clickoutsideContext"].documentHandler)},install:function(e){e.directive("clickoutside",{bind:this.bind,unbind:this.unbind})}}},391:function(e,t,n){"use strict";t.a={methods:{showSupportBanks:function(){this.$messagebox("支持银行列表：","农业银行、中国银行、工商银行、建设银行、交通银行、兴业银行、中信银行、光大银行、上海银行")}}}},394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(395),o=n.n(r),i=n(241),s=n.n(i),l=n(28),d=(n.n(l),n(29)),u=n.n(d),c=n(74),f=(n.n(c),n(75)),m=n.n(f),h=n(389);t.default={name:"fb-field",components:(a={},s()(a,m.a.name,m.a),s()(a,u.a.name,u.a),a),data:function(){return{active:!1,currentValue:this.value}},directives:{Clickoutside:h.a},props:{type:{type:String,default:"text"},rows:String,label:String,placeholder:String,readonly:Boolean,disabled:Boolean,disableClear:Boolean,state:{type:String,default:"default"},value:{},attr:Object},methods:{doCloseActive:function(){this.active=!1},handleInput:function(e){this.currentValue=e.target.value},handleClear:function(){this.disabled||this.readonly||(this.currentValue="")}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e)},attr:{immediate:!0,handler:function(e){var t=this;this.$nextTick(function(){[t.$refs.input,t.$refs.textarea].forEach(function(t){t&&e&&o()(e).map(function(n){return t.setAttribute(n,e[n])})})})}}}}},395:function(e,t,n){e.exports={default:n(396),__esModule:!0}},396:function(e,t,n){n(398),e.exports=n(6).Object.keys},397:function(e,t,n){var a=n(27),r=n(6),o=n(47);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],i={};i[e]=t(n),a(a.S+a.F*o(function(){n(1)}),"Object",i)}},398:function(e,t,n){var a=n(72),r=n(71);n(397)("keys",function(){return function(e){return r(a(e))}})},401:function(e,t,n){var a=n(8)(n(394),n(403),null,null);a.options.__file="/Users/luxueyan/mine/github/fn-h5-frontend/src/components/FbField.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] FbField.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},403:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mt-cell",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.doCloseActive,expression:"doCloseActive"}],staticClass:"mint-field",class:[{"is-textarea":"textarea"===e.type,"is-nolabel":!e.label}],attrs:{title:e.label}},[n("template",{slot:"title"},[e._t("label")],2),e._v(" "),"textarea"===e.type?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],ref:"textarea",staticClass:"mint-field-core",attrs:{placeholder:e.placeholder,rows:e.rows,disabled:e.disabled,readonly:e.readonly},domProps:{value:e.currentValue},on:{change:function(t){e.$emit("change",e.currentValue)},input:function(t){t.target.composing||(e.currentValue=t.target.value)}}}):n("input",{ref:"input",staticClass:"mint-field-core",attrs:{placeholder:e.placeholder,number:"number"===e.type,type:e.type,disabled:e.disabled,readonly:e.readonly},domProps:{value:e.currentValue},on:{change:function(t){e.$emit("change",e.currentValue)},focus:function(t){e.active=!0},input:e.handleInput}}),e._v(" "),e.disableClear?e._e():n("div",{directives:[{name:"show",rawName:"v-show",value:e.currentValue&&"textarea"!==e.type&&e.active,expression:"currentValue && type !== 'textarea' && active"}],staticClass:"mint-field-clear",on:{click:e.handleClear}},[n("i",{staticClass:"mintui mintui-field-error"})]),e._v(" "),e.state?n("span",{staticClass:"mint-field-state",class:["is-"+e.state]},[n("i",{staticClass:"mintui",class:["mintui-field-"+e.state]})]):e._e(),e._v(" "),n("div",{staticClass:"mint-field-other"},[e._t("default")],2)],2)},staticRenderFns:[]},e.exports.render._withStripped=!0},413:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(46),r=n.n(a),o=n(43),i=n.n(o),s=n(240),l=n.n(s),d=n(388),u=n(391),c=n(45),f=n(15),m=n(73),h=n(387),p=n(44),v=n(401),b=n.n(v),C=n(0),k=n.n(C);t.default={mixins:[d.a,u.a],components:{FbField:b.a},beforeRouteEnter:function(e,t,a){c.a.get().then(function(e){return e.json()}).then(function(e){a(function(t){e.data.content&&(t.contractInfoHasHistory=!0,l()(t.model,n.i(h.a)(e.data.content)),t.bankCardForShow=t.model.bankCard.replace(/\d{4}(?=(\d{1,4}))/g,"$& "))})})},watch:{bankCardForShow:function(){this.model.bankCard=this.bankCardForShow=this.bankCardForShow.replace(/\s/g,""),this.bankCardForShow=this.bankCardForShow.replace(/\d{4}(?=(\d{1,4}))/g,"$& ")}},validators:{"model.idCard":function(e){return this.validate(e).required("请输入身份证号").length(18,"请正确输入18位身份证").custom(function(){if(!n.i(m.c)(e))return"请正确输入二代18位身份证"})},"model.bankCard":function(e){return this.validate(e).required("请输入银行卡号").custom(function(){if(!n.i(m.b)(e))return"请正确输入16-19位银行卡号"})},"model.bankPhone":function(e){return this.validate(e).required("请输入手机号").digit("请正确输入手机号").regex("^1[3-9]\\d{9}$","请正确输入手机号")},"model.bank":function(e){return this.validate(e).required()}},methods:i()({},n.i(p.c)(["updateStateCode"]),{showServiceChargeTip:function(){var e=this.user.integraluserlevel,t=e.Creditmoney,n=e.Managemoney;this.$messagebox("服务费包含","\n        <table>\n          <tr><th>审核费用：</th><td>"+t+"元</td></tr>\n          <tr><th>账户管理费：</th><td>"+n+"元</td></tr>\n        </table>")},getBank:function(){var e=this;this.validation.isPassed("model.bankCard")&&c.b.get({bankCard:this.model.bankCard}).then(function(e){return e.json()}).then(function(t){e.model.bank=t.data.bank,e.bankCardNotSupported=t.ret===f.a.BANK_CARD_NOT_SUPPORTED})},submit:function(){var e=this;if(this.bankCardNotSupported)return void this.$toast("抱歉，您选择的银行卡不支持！","error");this.$validate().then(function(t){t?c.j.get(e.model).then(function(e){return e.json()}).then(function(t){t.ret===f.a.OK&&(e.updateStateCode(f.b.CONTRACT_INFO_FILLED),e.$router.push({name:"signature"}))}):e.$toast(e.validation.firstError(),"error")})},goChangeBankCard:function(){this.$router.push({name:"changeBankCardStep1"})}}),computed:i()({},n.i(p.b)(["stateCode"]),{serviceCharge:function(){var e=this.user.integraluserlevel;return e.Creditmoney+e.Managemoney},virtualMoney:function(){var e=this.user.integraluserlevel;return e.Limit-e.Creditmoney-e.Managemoney}}),data:function(){var e=JSON.parse(r()(this.$store.getters.user));return{qmNoteVisible:+k()().toDate()<=+new Date("2017-04-05 12:00:00"),contractInfoHasHistory:!1,bankCardNotSupported:!1,countdownVisible:!1,bankCardForShow:"",model:{name:e.UserinfoValLogin.Name,idCard:null,bankCard:null,bank:"",bankPhone:null},user:e}}}},422:function(e,t,n){t=e.exports=n(14)(),t.push([e.i,".loan-agreement[data-v-255f9644]{margin-top:5px}small.note[data-v-255f9644]{display:block;padding:10px;color:#888;line-height:1.8em}","",{version:3,sources:["/Users/luxueyan/mine/github/fn-h5-frontend/src/views/borrow/BorrowerInfo.vue"],names:[],mappings:"AACA,iCACE,cAAgB,CACjB,AACD,4BACE,cAAe,AACf,aAAc,AACd,WAAY,AACZ,iBAAmB,CACpB",file:"BorrowerInfo.vue",sourcesContent:["\n.loan-agreement[data-v-255f9644] {\n  margin-top: 5px;\n}\nsmall.note[data-v-255f9644] {\n  display: block;\n  padding: 10px;\n  color: #888;\n  line-height: 1.8em;\n}\n"],sourceRoot:""}])},447:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"borrow-info"},[n("form",{staticClass:"borrow-form",on:{submit:function(t){t.preventDefault(),e.submit()}}},[n("div",{staticClass:"fields-header"},[e._v("借款方案")]),n("div",{staticClass:"fields"},[n("mt-cell",{attrs:{title:"借款金额",value:e._f("fbCurrency")(e.user.integraluserlevel.Limit,"","元")}}),n("mt-cell",{attrs:{title:"借款天数",value:e._f("fbAppend")(e.user.product.Length,"天")}}),n("mt-cell",{attrs:{value:e._f("fbCurrency")(e.serviceCharge,"","元")}},[n("span",{slot:"title"},[e._v("服务费"),n("i",{staticClass:"iconfont ui-icon-info",on:{click:e.showServiceChargeTip}})])]),n("mt-cell",{attrs:{title:"实际到账",value:e._f("fbCurrency")(e.virtualMoney,"","元")}})],1),n("div",{staticClass:"fields-header"},[e._v("账户信息"),e.contractInfoHasHistory?e._e():n("small",[n("i",{staticClass:"iconfont ui-icon-warn"}),e._v("请填写您的真实信息，否则会影响借款。")])]),n("div",{staticClass:"fields"},[n("mt-cell",{attrs:{title:"姓名",value:e._f("fbFalse")(e.user.UserinfoValLogin.Name)}}),e.contractInfoHasHistory?e._e():[n("mt-field",{attrs:{label:"身份证号",placeholder:"请输入身份证号",state:e.getFieldState("model.idCard")},nativeOn:{click:function(t){e.showFieldError(t,"model.idCard")}},model:{value:e.model.idCard,callback:function(t){e.model.idCard=t},expression:"model.idCard"}}),n("fb-field",{directives:[{name:"mt-field-blur",rawName:"v-mt-field-blur",value:{blur:e.getBank},expression:"{blur:getBank}"}],attrs:{label:"银行卡号",placeholder:"请输入银行卡号",state:e.getFieldState("model.bankCard")},nativeOn:{click:function(t){e.showFieldError(t,"model.bankCard")}},model:{value:e.bankCardForShow,callback:function(t){e.bankCardForShow=t},expression:"bankCardForShow"}},[n("span",{slot:"label"},[e._v("银行卡号"),n("i",{staticClass:"iconfont ui-icon-info",on:{click:function(t){e.showSupportBanks()}}})])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model.bankCard,expression:"model.bankCard"}],attrs:{type:"hidden"},domProps:{value:e.model.bankCard},on:{input:function(t){t.target.composing||(e.model.bankCard=t.target.value)}}}),n("mt-cell",{attrs:{title:"开户行",value:e._f("fbFalse")(e.model.bank)}}),n("mt-field",{attrs:{label:"银行预留手机号",placeholder:"请输入银行预留手机号",state:e.getFieldState("model.bankPhone")},nativeOn:{click:function(t){e.showFieldError(t,"model.bankPhone")}},model:{value:e.model.bankPhone,callback:function(t){e.model.bankPhone=t},expression:"model.bankPhone"}})],e.contractInfoHasHistory?[n("mt-cell",{attrs:{title:"身份证号",value:e.model.idCard}}),n("mt-cell",{attrs:{title:"银行卡号"}},[n("span",[e._v(e._s(e.bankCardForShow))])]),n("mt-cell",{attrs:{title:"开户行",value:e._f("fbFalse")(e.model.bank)}}),n("mt-cell",{attrs:{title:"银行预留手机号",value:e.model.bankPhone}}),n("mt-cell",{nativeOn:{click:function(t){e.goChangeBankCard()}}},[n("a",{staticClass:"small"},[e._v("变更银行卡")])])]:e._e()],2),n("div",{staticClass:"form-buttons fixed"},[n("mt-button",{staticClass:"mint-button-block",attrs:{type:"primary",size:"large"}},[e._v("立即提款")])],1)])])},staticRenderFns:[]},e.exports.render._withStripped=!0},465:function(e,t,n){var a=n(422);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(26)("b5c8446c",a,!1)}});