webpackJsonp([1],{376:function(e,t,n){n(476);var a=n(8)(n(409),n(458),null,null);a.options.__file="/Users/luxueyan/mine/github/hummingbird-h5-frontend/src/views/account/ChangeBankCardStep2.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] ChangeBankCardStep2.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},387:function(e,t,n){"use strict";function a(e){return{idCard:e.Idcard,cardName:e.Cardname,bankCard:e.Bankcard,bankPhone:e.Bankphone,bank:e.Bankname,loanAmount:e.Loanamount,totalAmount:e.Totalamount,endDate:r()(e.Enddate).format("YYYY年MM月DD日"),startDate:r()(e.Startdate).format("YYYY年MM月DD日")}}t.a=a;var o=n(0),r=n.n(o)},388:function(e,t,n){"use strict";var a=n(70),o=n.n(a),r=o.a.Validator;t.a={methods:{Validator:r,validate:r.value,getFieldState:function(e){return this.validation.hasError(e)?"error":this.validation.isPassed(e)?"success":""},showFieldError:function(e,t){var n=e.target;n.classList.contains("mintui-field-error")&&n.parentNode.classList.contains("mint-field-state")&&this.$toast(this.validation.firstError(t),"error")}}}},389:function(e,t,n){"use strict";t.a={bind:function(e,t,n){var a=function(t){n.context&&!e.contains(t.target)&&n.context[e["@@clickoutsideContext"].methodName]()};e["@@clickoutsideContext"]={documentHandler:a,methodName:t.expression,arg:t.arg||"click"},document.addEventListener(e["@@clickoutsideContext"].arg,a)},update:function(e,t){e["@@clickoutsideContext"].methodName=t.expression},unbind:function(e){document.removeEventListener(e["@@clickoutsideContext"].arg,e["@@clickoutsideContext"].documentHandler)},install:function(e){e.directive("clickoutside",{bind:this.bind,unbind:this.unbind})}}},391:function(e,t,n){"use strict";t.a={methods:{showSupportBanks:function(){this.$messagebox("支持银行列表：","农业银行、中国银行、工商银行、建设银行、交通银行、兴业银行、中信银行、光大银行、上海银行")}}}},394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(395),r=n.n(o),i=n(241),s=n.n(i),l=n(28),c=(n.n(l),n(29)),d=n.n(c),u=n(74),h=(n.n(u),n(75)),m=n.n(h),f=n(389);t.default={name:"fb-field",components:(a={},s()(a,m.a.name,m.a),s()(a,d.a.name,d.a),a),data:function(){return{active:!1,currentValue:this.value}},directives:{Clickoutside:f.a},props:{type:{type:String,default:"text"},rows:String,label:String,placeholder:String,readonly:Boolean,disabled:Boolean,disableClear:Boolean,state:{type:String,default:"default"},value:{},attr:Object},methods:{doCloseActive:function(){this.active=!1},handleInput:function(e){this.currentValue=e.target.value},handleClear:function(){this.disabled||this.readonly||(this.currentValue="")}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e)},attr:{immediate:!0,handler:function(e){var t=this;this.$nextTick(function(){[t.$refs.input,t.$refs.textarea].forEach(function(t){t&&e&&r()(e).map(function(n){return t.setAttribute(n,e[n])})})})}}}}},395:function(e,t,n){e.exports={default:n(396),__esModule:!0}},396:function(e,t,n){n(398),e.exports=n(6).Object.keys},397:function(e,t,n){var a=n(27),o=n(6),r=n(47);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),a(a.S+a.F*r(function(){n(1)}),"Object",i)}},398:function(e,t,n){var a=n(72),o=n(71);n(397)("keys",function(){return function(e){return o(a(e))}})},401:function(e,t,n){var a=n(8)(n(394),n(403),null,null);a.options.__file="/Users/luxueyan/mine/github/hummingbird-h5-frontend/src/components/FbField.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] FbField.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},403:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mt-cell",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.doCloseActive,expression:"doCloseActive"}],staticClass:"mint-field",class:[{"is-textarea":"textarea"===e.type,"is-nolabel":!e.label}],attrs:{title:e.label}},[n("template",{slot:"title"},[e._t("label")],2),e._v(" "),"textarea"===e.type?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],ref:"textarea",staticClass:"mint-field-core",attrs:{placeholder:e.placeholder,rows:e.rows,disabled:e.disabled,readonly:e.readonly},domProps:{value:e.currentValue},on:{change:function(t){e.$emit("change",e.currentValue)},input:function(t){t.target.composing||(e.currentValue=t.target.value)}}}):n("input",{ref:"input",staticClass:"mint-field-core",attrs:{placeholder:e.placeholder,number:"number"===e.type,type:e.type,disabled:e.disabled,readonly:e.readonly},domProps:{value:e.currentValue},on:{change:function(t){e.$emit("change",e.currentValue)},focus:function(t){e.active=!0},input:e.handleInput}}),e._v(" "),e.disableClear?e._e():n("div",{directives:[{name:"show",rawName:"v-show",value:e.currentValue&&"textarea"!==e.type&&e.active,expression:"currentValue && type !== 'textarea' && active"}],staticClass:"mint-field-clear",on:{click:e.handleClear}},[n("i",{staticClass:"mintui mintui-field-error"})]),e._v(" "),e.state?n("span",{staticClass:"mint-field-state",class:["is-"+e.state]},[n("i",{staticClass:"mintui",class:["mintui-field-"+e.state]})]):e._e(),e._v(" "),n("div",{staticClass:"mint-field-other"},[e._t("default")],2)],2)},staticRenderFns:[]},e.exports.render._withStripped=!0},409:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(240),o=n.n(a),r=n(43),i=n.n(r),s=n(388),l=n(391),c=n(401),d=n.n(c),u=n(45),h=n(15),m=n(73),f=n(387),p=n(44);t.default={mixins:[s.a,l.a],components:{FbField:d.a},beforeRouteEnter:function(e,t,a){u.a.get().then(function(e){return e.json()}).then(function(e){var t=n.i(f.a)(e.data.content);a(function(n){e.data.content&&(n.contractInfoHasHistory=!0,n.placeholders.bankCard=t.bankCard.replace(/\d{4}(?=(\d{1,4}))/g,"$& "),n.placeholders.bankPhone=t.bankPhone,n.model.bankName=t.bank)})})},validators:{"model.bankCard":function(e){return this.validate(e).required("请输入银行卡号").custom(function(){if(!n.i(m.b)(e))return"请正确输入16-19位银行卡号"})},"model.bankPhone":function(e){return this.validate(e).required("请输入手机号").digit("请正确输入手机号").regex("^1[3-9]\\d{9}$","请正确输入手机号")},"model.bankName":function(e){return this.validate(e).required()}},watch:{bankCardForShow:function(){this.model.bankCard=this.bankCardForShow=this.bankCardForShow.replace(/\s/g,""),this.bankCardForShow=this.bankCardForShow.replace(/\d{4}(?=(\d{1,4}))/g,"$& ")}},methods:i()({},n.i(p.c)(["updateUser"]),{getBank:function(){var e=this;this.validation.isPassed("model.bankCard")&&u.b.get({bankCard:this.model.bankCard}).then(function(e){return e.json()}).then(function(t){e.model.bankName=t.data.bank,e.bankCardNotSupported=t.ret===h.a.BANK_CARD_NOT_SUPPORTED})},submit:function(){var e=this;if(this.bankCardNotSupported)return void this.$toast("抱歉，您选择的银行卡不支持！","error");this.model.bankCard||(this.bankCardForShow=this.placeholders.bankCard,this.model.bankCard=this.placeholders.bankCard.replace(/\s/g,"")),this.model.bankPhone||(this.model.bankPhone=this.placeholders.bankPhone),this.$validate().then(function(t){t?u.c.save(e.model).then(function(e){return e.json()}).then(function(t){t.ret===h.a.OK&&(e.updateUser(o()({},e.user,e.model,{bank:e.model.bankName})),e.$router.push({name:"changeBankCardStep3"}))}):e.$toast(e.validation.firstError(),"error")})}}),computed:i()({},n.i(p.b)(["user"])),data:function(){return{bankCardNotSupported:!1,bankCardForShow:"",placeholders:{bankCard:"",bankPhone:null},model:{bankCard:"",bankPhone:null,bankName:""}}}}},433:function(e,t,n){t=e.exports=n(14)(),t.push([e.i,".change-bank-card-form input::-moz-placeholder{color:#c5c9d2;font-size:14px;opacity:1}.change-bank-card-form input:-ms-input-placeholder{color:#c5c9d2;font-size:14px}.change-bank-card-form input::-webkit-input-placeholder{color:#c5c9d2;font-size:14px}","",{version:3,sources:["/Users/luxueyan/mine/github/hummingbird-h5-frontend/src/views/account/ChangeBankCardStep2.vue"],names:[],mappings:"AACA,+CACE,cAAe,AACf,eAAgB,AAChB,SAAW,CACZ,AACD,mDACE,cAAe,AACf,cAAgB,CACjB,AACD,wDACE,cAAe,AACf,cAAgB,CACjB",file:"ChangeBankCardStep2.vue",sourcesContent:["\n.change-bank-card-form input::-moz-placeholder {\n  color: #c5c9d2;\n  font-size: 14px;\n  opacity: 1;\n}\n.change-bank-card-form input:-ms-input-placeholder {\n  color: #c5c9d2;\n  font-size: 14px;\n}\n.change-bank-card-form input::-webkit-input-placeholder {\n  color: #c5c9d2;\n  font-size: 14px;\n}\n"],sourceRoot:""}])},458:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("form",{staticClass:"change-bank-card-form",on:{submit:function(t){t.preventDefault(),e.submit()}}},[n("div",{staticClass:"fields-header"},[e._v("更新银行卡信息")]),n("div",{staticClass:"fields"},[n("fb-field",{directives:[{name:"mt-field-blur",rawName:"v-mt-field-blur",value:{blur:e.getBank},expression:"{blur:getBank}"}],attrs:{label:"银行卡号",placeholder:e.placeholders.bankCard,state:e.getFieldState("model.bankCard")},nativeOn:{click:function(t){e.showFieldError(t,"model.bankCard")}},model:{value:e.bankCardForShow,callback:function(t){e.bankCardForShow=t},expression:"bankCardForShow"}},[n("span",{slot:"label"},[e._v("银行卡号"),n("i",{staticClass:"iconfont ui-icon-info",on:{click:function(t){e.showSupportBanks()}}})])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model.bankCard,expression:"model.bankCard"}],attrs:{type:"hidden"},domProps:{value:e.model.bankCard},on:{input:function(t){t.target.composing||(e.model.bankCard=t.target.value)}}}),n("mt-field",{attrs:{label:"银行预留手机号",placeholder:e.placeholders.bankPhone,state:e.getFieldState("model.bankPhone")},nativeOn:{click:function(t){e.showFieldError(t,"model.bankPhone")}},model:{value:e.model.bankPhone,callback:function(t){e.model.bankPhone=t},expression:"model.bankPhone"}}),n("mt-cell",{attrs:{title:"开户行",value:e._f("fbFalse")(e.model.bankName)}})],1),n("div",{staticClass:"form-buttons"},[n("mt-button",{staticClass:"mint-button-block",attrs:{type:"primary",size:"large"}},[e._v("下一步")])],1)])])},staticRenderFns:[]},e.exports.render._withStripped=!0},476:function(e,t,n){var a=n(433);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(26)("23ee87a4",a,!1)}});