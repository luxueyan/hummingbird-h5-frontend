webpackJsonp([12],{SKmp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),o=n("woOf"),s=n.n(o),i=n("//Fk"),c=n.n(i),u=n("exGp"),f=n.n(u),p=n("3dbI"),d=n("z0iR"),l=n("IcnI"),h=n("oiih");e.default={mixins:[d.a],beforeRouteEnter:function(t,e,n){var r=this;return f()(a.a.mark(function t(){var e,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.a.getters.user,t.next=3,c.a.all([p.a.get({id:e.currentOngoingContract.id}).then(function(t){return t.json()}),p.b.get({contractId:e.currentOngoingContract.id}).then(function(t){return t.json()})]);case 3:o=t.sent,n(function(t){o[0].code===h.a.OK&&(t.contract=s()({},o[0].data)),o[1].code===h.a.OK&&(t.err=o[1].data)});case 5:case"end":return t.stop()}},t,r)}))()},methods:{repayRetry:function(){this.$store.commit("updateStateCode",h.b.DEBT_NOT_SETTLED),this.$router.push({name:"repayInfo"})}},filters:{errMsgPrune:function(t){return t?t.replace(/\[[^]]*\]/g,""):""}},mounted:function(){this.$route.params.fromDefaultBankSet&&this.repay()},data:function(){return{contract:{bankCard:""},err:{repaymentReasonMsg:""}}}}},TfbR:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"repay-failed single-page-tip error"},[n("header",{staticClass:"small-header"},[n("h2",[n("fb-icon",{attrs:{name:"shibai"}}),t._v("还款失败")],1),n("p",{domProps:{innerHTML:t._s(t.err.repaymentReasonMsg)}})]),n("article",[n("h4",[t._v("您还可以这样还款")]),n("ul",[n("li",[t._v("方式一：继续用尾号"+t._s(t.contract.bankCard.slice(-4))+"还款。"),n("a",{on:{click:function(e){e.preventDefault(),t.repayRetry()}}},[n("mt-button",{staticClass:"br2",attrs:{type:"default"}},[t._v("重试")])],1)]),n("li",[t._v("方式二：更换一张充足余额的银行卡。"),n("router-link",{attrs:{to:{name:"bankList",params:{transitionName:"slideRightFade",from:t.$route}}}},[n("mt-button",{staticClass:"br2",attrs:{type:"default"}},[t._v("前往")])],1)],1),n("li",[t._v("方式三：通过支付宝转账至我们公户fengniaosudai@163.com(请备注姓名+手机号），转账后在公众号中通知客服。")])])])])},staticRenderFns:[]}},aPY6:function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,".repay-failed .mint-button{font-size:13px;height:23px;line-height:23px;background-color:#fff;overflow:hidden;box-shadow:none;color:inherit}",""])},qNFj:function(t,e,n){var r=n("aPY6");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("07bb3cff",r,!0)},slIS:function(t,e,n){n("qNFj");var r=n("VU/8")(n("SKmp"),n("TfbR"),null,null);t.exports=r.exports},z0iR:function(t,e,n){"use strict";var r=n("Xxa5"),a=n.n(r),o=n("exGp"),s=n.n(o),i=n("Dd8w"),c=n.n(i),u=n("3dbI"),f=n("oiih"),p=n("NYxO");e.a={methods:c()({},n.i(p.c)(["updateStateCode"]),{repay:function(){var t=this;return s()(a.a.mark(function e(){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.c.save({contractId:t.$store.getters.user.currentOngoingContract.id}).then(function(t){return t.json()});case 2:n=e.sent,n.code===f.a.OK&&(r=n.data.repaymentStatus,0===r?(t.updateStateCode(f.b.REPAYING),t.$router.push({name:"repaying"})):2===r?t.$toast("支付系统升级中！","error"):t.$toast("抱歉，系统繁忙","error"));case 4:case"end":return e.stop()}},e,t)}))()}})}}});