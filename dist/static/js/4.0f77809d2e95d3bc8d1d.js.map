{"version":3,"sources":["webpack:///static/js/4.0f77809d2e95d3bc8d1d.js","webpack:///./src/views/account/ChangeBankCardStep2.vue","webpack:///./src/views/validator_mixin.js?9d68**","webpack:///ChangeBankCardStep2.vue","webpack:///./src/views/account/ChangeBankCardStep2.vue?141a","webpack:///./src/views/account/ChangeBankCardStep2.vue?99a2","webpack:///./src/views/account/ChangeBankCardStep2.vue?ade7"],"names":["webpackJsonp","332","module","exports","__webpack_require__","Component","342","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_simple_vue_validator__","__WEBPACK_IMPORTED_MODULE_0_simple_vue_validator___default","n","Validator","a","methods","validate","value","getFieldState","field","this","validation","hasError","isPassed","showFieldError","event","et","target","classList","contains","parentNode","$root","toast","firstError","353","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_2__validator_mixin_js__","__WEBPACK_IMPORTED_MODULE_3__common_resources_js__","__WEBPACK_IMPORTED_MODULE_4__constants_js__","__WEBPACK_IMPORTED_MODULE_5__common_utils_js__","__WEBPACK_IMPORTED_MODULE_6_vuex__","mixins","validators","model.bankCard","required","custom","i","model.bankPhone","digit","regex","model.bankName","watch","bankCardForShow","model","bankCard","replace","getBank","_this","get","then","res","json","data","bankName","bank","bankCardNotSupported","ret","BANK_CARD_NOT_SUPPORTED","submit","_this2","$validate","success","save","OK","updateUser","user","$router","push","name","computed","bankPhone","373","version","sources","names","mappings","file","sourceRoot","387","content","locals","409","render","_vm","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","_v","directives","rawName","blur","expression","attrs","label","placeholder","state","nativeOn","click","callback","$$v","type","domProps","input","composing","title","_f","size","staticRenderFns"],"mappings":"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","file":"static/js/4.0f77809d2e95d3bc8d1d.js","sourcesContent":["webpackJsonp([4,17],{\n\n/***/ 332:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(387)\n\nvar Component = __webpack_require__(57)(\n  /* script */\n  __webpack_require__(353),\n  /* template */\n  __webpack_require__(409),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 342:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_simple_vue_validator__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_simple_vue_validator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_simple_vue_validator__);\n\nvar Validator = __WEBPACK_IMPORTED_MODULE_0_simple_vue_validator___default.a.Validator;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = {\n  methods: {\n    Validator: Validator,\n    validate: Validator.value,\n    getFieldState: function getFieldState(field) {\n      if (this.validation.hasError(field)) {\n        return 'error';\n      } else if (this.validation.isPassed(field)) {\n        return 'success';\n      }\n      return '';\n    },\n    showFieldError: function showFieldError(event, field) {\n      var et = event.target;\n      if (et.classList.contains('mintui-field-error') && et.parentNode.classList.contains('mint-field-state')) {\n        this.$root.toast(this.validation.firstError(field), 'error');\n      }\n    }\n  }\n};\n\n/***/ }),\n\n/***/ 353:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(214);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__validator_mixin_js__ = __webpack_require__(342);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_resources_js__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__constants_js__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__common_utils_js__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_vuex__ = __webpack_require__(59);\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = {\n  mixins: [__WEBPACK_IMPORTED_MODULE_2__validator_mixin_js__[\"a\" /* default */]],\n\n  validators: {\n    'model.bankCard': function modelBankCard(value) {\n      return this.validate(value).required('请输入银行卡号').custom(function () {\n        if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__common_utils_js__[\"b\" /* isBankCard */])(value)) {\n          return '请正确输入16-19位银行卡号';\n        }\n      });\n    },\n    'model.bankPhone': function modelBankPhone(value) {\n      return this.validate(value).required('请输入手机号').digit('请正确输入手机号').regex('^1[3-9]\\\\d{9}$', '请正确输入手机号');\n    },\n    'model.bankName': function modelBankName(value) {\n      return this.validate(value).required();\n    }\n  },\n\n  watch: {\n    'bankCardForShow': function bankCardForShow() {\n      this.model.bankCard = this.bankCardForShow = this.bankCardForShow.replace(/\\s/g, '');\n      this.bankCardForShow = this.bankCardForShow.replace(/\\d{4}(?=(\\d{1,4}))/g, '$& ');\n    }\n  },\n\n  methods: __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6_vuex__[\"c\" /* mapMutations */])(['updateUser']), {\n    getBank: function getBank() {\n      var _this = this;\n\n      if (this.validation.isPassed('model.bankCard')) {\n        __WEBPACK_IMPORTED_MODULE_3__common_resources_js__[\"a\" /* isDetectionBankCard */].get({\n          bankCard: this.model.bankCard\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          _this.model.bankName = data.data.bank;\n          _this.bankCardNotSupported = data.ret === __WEBPACK_IMPORTED_MODULE_4__constants_js__[\"a\" /* RET_CODE_MAP */].BANK_CARD_NOT_SUPPORTED;\n        });\n      }\n    },\n    submit: function submit() {\n      var _this2 = this;\n\n      if (this.bankCardNotSupported) {\n        this.$root.toast('抱歉，您选择的银行卡不支持！', 'error');\n        return;\n      }\n\n      this.$validate().then(function (success) {\n        if (success) {\n          __WEBPACK_IMPORTED_MODULE_3__common_resources_js__[\"b\" /* updateBankInfo */].save(_this2.model).then(function (res) {\n            return res.json();\n          }).then(function (data) {\n            if (data.ret === __WEBPACK_IMPORTED_MODULE_4__constants_js__[\"a\" /* RET_CODE_MAP */].OK) {\n              _this2.updateUser(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()({}, _this2.user, {\n                bank: _this2.model.bank\n              }, _this2.model));\n\n              _this2.$router.push({\n                name: 'changeBankCardStep3'\n              });\n            }\n          });\n        } else {\n          _this2.$root.toast(_this2.validation.firstError(), 'error');\n        }\n      });\n    }\n  }),\n\n  computed: __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6_vuex__[\"b\" /* mapGetters */])(['user'])),\n\n  data: function data() {\n    return {\n      bankCardNotSupported: false,\n      bankCardForShow: '',\n      model: {\n        bankCard: '',\n        bankPhone: null,\n        bankName: ''\n      }\n    };\n  }\n};\n\n/***/ }),\n\n/***/ 373:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(324)();\n// imports\n\n\n// module\nexports.push([module.i, \"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"ChangeBankCardStep2.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 387:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(373);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(325)(\"5f9fddae\", content, true);\n// Hot Module Replacement\nif(false) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/index.js?-autoprefixer&sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-79f3c7bc!../../../node_modules/sass-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./ChangeBankCardStep2.vue\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/index.js?-autoprefixer&sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-79f3c7bc!../../../node_modules/sass-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./ChangeBankCardStep2.vue\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 409:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', [_c('form', {\n    staticClass: \"change-bank-card-form\",\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        _vm.submit()\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"fields-header\"\n  }, [_vm._v(\"更新银行卡信息\")]), _c('div', {\n    staticClass: \"fields\"\n  }, [_c('mt-field', {\n    directives: [{\n      name: \"mt-field-blur\",\n      rawName: \"v-mt-field-blur\",\n      value: ({\n        blur: _vm.getBank\n      }),\n      expression: \"{blur:getBank}\"\n    }],\n    attrs: {\n      \"label\": \"银行卡号\",\n      \"placeholder\": \"请输入银行卡号\",\n      \"state\": _vm.getFieldState('model.bankCard')\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showFieldError($event, 'model.bankCard')\n      }\n    },\n    model: {\n      value: (_vm.bankCardForShow),\n      callback: function($$v) {\n        _vm.bankCardForShow = $$v\n      },\n      expression: \"bankCardForShow\"\n    }\n  }), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.model.bankCard),\n      expression: \"model.bankCard\"\n    }],\n    attrs: {\n      \"type\": \"hidden\"\n    },\n    domProps: {\n      \"value\": (_vm.model.bankCard)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.model.bankCard = $event.target.value\n      }\n    }\n  }), _c('mt-field', {\n    attrs: {\n      \"label\": \"银行预留手机号\",\n      \"placeholder\": \"请输入银行预留手机号\",\n      \"state\": _vm.getFieldState('model.bankPhone')\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showFieldError($event, 'model.bankPhone')\n      }\n    },\n    model: {\n      value: (_vm.model.bankPhone),\n      callback: function($$v) {\n        _vm.model.bankPhone = $$v\n      },\n      expression: \"model.bankPhone\"\n    }\n  }), _c('mt-cell', {\n    attrs: {\n      \"title\": \"开户行\",\n      \"value\": _vm._f(\"fbFalse\")(_vm.model.bankName)\n    }\n  })], 1), _c('div', {\n    staticClass: \"form-buttons\"\n  }, [_c('mt-button', {\n    staticClass: \"mint-button-block\",\n    attrs: {\n      \"type\": \"primary\",\n      \"size\": \"large\"\n    }\n  }, [_vm._v(\"下一步\")])], 1)])])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/4.0f77809d2e95d3bc8d1d.js","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?-autoprefixer&sourceMap!../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-79f3c7bc!sass-loader?sourceMap!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChangeBankCardStep2.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChangeBankCardStep2.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler?id=data-v-79f3c7bc!../../../node_modules/vue-loader/lib/template-loader?raw&engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChangeBankCardStep2.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/account/ChangeBankCardStep2.vue\n// module id = 332\n// module chunks = 4","import SimpleVueValidation from 'simple-vue-validator'\nconst Validator = SimpleVueValidation.Validator\n\nexport default {\n  methods: {\n    Validator,\n    validate: Validator.value,\n    getFieldState(field) {\n      if (this.validation.hasError(field)) {\n        return 'error'\n      } else if (this.validation.isPassed(field)) {\n        return 'success'\n      }\n      return ''\n    },\n    showFieldError(event, field) {\n      const et = event.target\n      if (et.classList.contains('mintui-field-error') && et.parentNode.classList.contains('mint-field-state')) {\n        this.$root.toast(this.validation.firstError(field), 'error')\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/validator_mixin.js","<template lang=\"pug\">\nsection\n  form.change-bank-card-form(@submit.prevent='submit()')\n    .fields-header\n      | 更新银行卡信息\n    .fields\n      mt-field(v-mt-field-blur=\"{blur:getBank}\", label='银行卡号', placeholder='请输入银行卡号', v-model=\"bankCardForShow\", :state=\"getFieldState('model.bankCard')\", @click.native=\"showFieldError($event, 'model.bankCard')\")\n      input(type=\"hidden\", v-model='model.bankCard')\n      mt-field(label='银行预留手机号', placeholder='请输入银行预留手机号', v-model=\"model.bankPhone\", :state=\"getFieldState('model.bankPhone')\", @click.native=\"showFieldError($event, 'model.bankPhone')\")\n      mt-cell(title=\"开户行\", :value=\"model.bankName | fbFalse\")\n    .form-buttons\n      mt-button.mint-button-block(type='primary', size='large') 下一步\n</template>\n\n<script>\nimport ValidatorMixin from '../validator_mixin.js'\nimport {\n  isDetectionBankCard,\n  updateBankInfo\n} from '../../common/resources.js'\nimport {\n  RET_CODE_MAP\n} from '../../constants.js'\nimport {\n  isBankCard\n} from '../../common/utils.js'\nimport {\n  mapGetters,\n  mapMutations\n} from 'vuex'\n\nexport default {\n  mixins: [ValidatorMixin],\n\n  validators: {\n    'model.bankCard' (value) {\n      return this.validate(value).required('请输入银行卡号')\n        .custom(() => {\n          if (!isBankCard(value)) {\n            return '请正确输入16-19位银行卡号'\n          }\n        })\n    },\n    'model.bankPhone' (value) {\n      return this.validate(value).required('请输入手机号').digit('请正确输入手机号').regex('^1[3-9]\\\\d{9}$', '请正确输入手机号')\n    },\n    'model.bankName' (value) {\n      return this.validate(value).required()\n    }\n  },\n\n  watch: {\n    'bankCardForShow' () {\n      this.model.bankCard = this.bankCardForShow = this.bankCardForShow.replace(/\\s/g, '')\n      this.bankCardForShow = this.bankCardForShow.replace(/\\d{4}(?=(\\d{1,4}))/g, '$& ') //展示空格分隔的银行卡号\n    }\n  },\n\n  methods: {\n    ...mapMutations(['updateUser']),\n    // 获取银行卡开户行\n    getBank() {\n      if (this.validation.isPassed('model.bankCard')) {\n        isDetectionBankCard.get({\n          bankCard: this.model.bankCard\n        }).then(res => res.json()).then(data => {\n          this.model.bankName = data.data.bank\n          this.bankCardNotSupported = data.ret === RET_CODE_MAP.BANK_CARD_NOT_SUPPORTED\n        })\n      }\n    },\n    submit() {\n      if (this.bankCardNotSupported) {\n        this.$root.toast('抱歉，您选择的银行卡不支持！', 'error')\n        return\n      }\n\n      this.$validate().then(success => {\n        if (success) {\n          updateBankInfo.save(this.model).then(res => res.json()).then(data => {\n            if (data.ret === RET_CODE_MAP.OK) {\n              // 添加更新银行卡state信息\n              this.updateUser(Object.assign({}, this.user, {\n                bank: this.model.bank\n              }, this.model))\n\n              this.$router.push({\n                name: 'changeBankCardStep3'\n              })\n            }\n          })\n        } else {\n          this.$root.toast(this.validation.firstError(), 'error')\n        }\n      })\n    }\n  },\n\n  computed: {\n    ...mapGetters(['user'])\n  },\n\n  data() {\n    return {\n      bankCardNotSupported: false,\n      bankCardForShow: '',\n      model: {\n        bankCard: '',\n        bankPhone: null,\n        bankName: ''\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ChangeBankCardStep2.vue?8a270b4a","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"ChangeBankCardStep2.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?-autoprefixer&sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-79f3c7bc!./~/sass-loader?sourceMap!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/account/ChangeBankCardStep2.vue\n// module id = 373\n// module chunks = 4","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?-autoprefixer&sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-79f3c7bc!../../../node_modules/sass-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./ChangeBankCardStep2.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"5f9fddae\", content, true);\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/index.js?-autoprefixer&sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-79f3c7bc!../../../node_modules/sass-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./ChangeBankCardStep2.vue\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/index.js?-autoprefixer&sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-79f3c7bc!../../../node_modules/sass-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./ChangeBankCardStep2.vue\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?-autoprefixer&sourceMap!./~/vue-loader/lib/style-rewriter.js?id=data-v-79f3c7bc!./~/sass-loader?sourceMap!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/account/ChangeBankCardStep2.vue\n// module id = 387\n// module chunks = 4","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', [_c('form', {\n    staticClass: \"change-bank-card-form\",\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        _vm.submit()\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"fields-header\"\n  }, [_vm._v(\"更新银行卡信息\")]), _c('div', {\n    staticClass: \"fields\"\n  }, [_c('mt-field', {\n    directives: [{\n      name: \"mt-field-blur\",\n      rawName: \"v-mt-field-blur\",\n      value: ({\n        blur: _vm.getBank\n      }),\n      expression: \"{blur:getBank}\"\n    }],\n    attrs: {\n      \"label\": \"银行卡号\",\n      \"placeholder\": \"请输入银行卡号\",\n      \"state\": _vm.getFieldState('model.bankCard')\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showFieldError($event, 'model.bankCard')\n      }\n    },\n    model: {\n      value: (_vm.bankCardForShow),\n      callback: function($$v) {\n        _vm.bankCardForShow = $$v\n      },\n      expression: \"bankCardForShow\"\n    }\n  }), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.model.bankCard),\n      expression: \"model.bankCard\"\n    }],\n    attrs: {\n      \"type\": \"hidden\"\n    },\n    domProps: {\n      \"value\": (_vm.model.bankCard)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.model.bankCard = $event.target.value\n      }\n    }\n  }), _c('mt-field', {\n    attrs: {\n      \"label\": \"银行预留手机号\",\n      \"placeholder\": \"请输入银行预留手机号\",\n      \"state\": _vm.getFieldState('model.bankPhone')\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showFieldError($event, 'model.bankPhone')\n      }\n    },\n    model: {\n      value: (_vm.model.bankPhone),\n      callback: function($$v) {\n        _vm.model.bankPhone = $$v\n      },\n      expression: \"model.bankPhone\"\n    }\n  }), _c('mt-cell', {\n    attrs: {\n      \"title\": \"开户行\",\n      \"value\": _vm._f(\"fbFalse\")(_vm.model.bankName)\n    }\n  })], 1), _c('div', {\n    staticClass: \"form-buttons\"\n  }, [_c('mt-button', {\n    staticClass: \"mint-button-block\",\n    attrs: {\n      \"type\": \"primary\",\n      \"size\": \"large\"\n    }\n  }, [_vm._v(\"下一步\")])], 1)])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-79f3c7bc!./~/vue-loader/lib/template-loader.js?raw&engine=pug!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/account/ChangeBankCardStep2.vue\n// module id = 409\n// module chunks = 4"],"sourceRoot":""}