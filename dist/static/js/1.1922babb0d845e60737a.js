webpackJsonp([1,17],{332:function(e,t,a){a(396);var n=a(59)(a(362),a(418),null,null);e.exports=n.exports},341:function(e,t,a){"use strict";function n(e){return{idCard:e.Idcard,cardName:e.Cardname,bankCard:e.Bankcard,bankPhone:e.Bankphone,bank:e.Bankname,loanAmount:e.Loanamount,totalAmount:e.Totalamount,endDate:i()(e.Enddate).format("YYYY年MM月DD日"),startDate:i()(e.Startdate).format("YYYY年MM月DD日")}}var r=a(0),i=a.n(r);t.a=n},342:function(e,t,a){"use strict";var n=a(62),r=a.n(n),i=r.a.Validator;t.a={methods:{Validator:i,validate:i.value,getFieldState:function(e){return this.validation.hasError(e)?"error":this.validation.isPassed(e)?"success":""},showFieldError:function(e,t){var a=e.target;a.classList.contains("mintui-field-error")&&a.parentNode.classList.contains("mint-field-state")&&this.$root.toast(this.validation.firstError(t),"error")}}}},343:function(e,t,a){"use strict";var n="@@clickoutsideContext";t.a={bind:function(e,t,a){var r=function(t){a.context&&!e.contains(t.target)&&a.context[e[n].methodName]()};e[n]={documentHandler:r,methodName:t.expression,arg:t.arg||"click"},document.addEventListener(e[n].arg,r)},update:function(e,t){e[n].methodName=t.expression},unbind:function(e){document.removeEventListener(e[n].arg,e[n].documentHandler)},install:function(e){e.directive("clickoutside",{bind:this.bind,unbind:this.unbind})}}},345:function(e,t,a){"use strict";t.a={methods:{showSupportBanks:function(){this.$root.MessageBox("支持银行列表：","农业银行、中国银行、工商银行、建设银行、交通银行、兴业银行、中信银行、平安银行、光大银行、上海银行")}}}},348:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(349),i=a.n(r),o=a(215),s=a.n(o),l=a(35),d=(a.n(l),a(36)),u=a.n(d),c=a(67),m=(a.n(c),a(68)),f=a.n(m),h=a(343);t.default={name:"fb-field",components:(n={},s()(n,f.a.name,f.a),s()(n,u.a.name,u.a),n),data:function(){return{active:!1,currentValue:this.value}},directives:{Clickoutside:h.a},props:{type:{type:String,default:"text"},rows:String,label:String,placeholder:String,readonly:Boolean,disabled:Boolean,disableClear:Boolean,state:{type:String,default:"default"},value:{},attr:Object},methods:{doCloseActive:function(){this.active=!1},handleInput:function(e){this.currentValue=e.target.value},handleClear:function(){this.disabled||this.readonly||(this.currentValue="")}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e)},attr:{immediate:!0,handler:function(e){var t=this;this.$nextTick(function(){[t.$refs.input,t.$refs.textarea].forEach(function(t){t&&e&&i()(e).map(function(a){return t.setAttribute(a,e[a])})})})}}}}},349:function(e,t,a){e.exports={default:a(350),__esModule:!0}},350:function(e,t,a){a(352),e.exports=a(6).Object.keys},351:function(e,t,a){var n=a(23),r=a(6),i=a(34);e.exports=function(e,t){var a=(r.Object||{})[e]||Object[e],o={};o[e]=t(a),n(n.S+n.F*i(function(){a(1)}),"Object",o)}},352:function(e,t,a){var n=a(65),r=a(64);a(351)("keys",function(){return function(e){return r(n(e))}})},354:function(e,t,a){var n=a(59)(a(348),a(356),null,null);e.exports=n.exports},356:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("mt-cell",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.doCloseActive,expression:"doCloseActive"}],staticClass:"mint-field",class:[{"is-textarea":"textarea"===e.type,"is-nolabel":!e.label}],attrs:{title:e.label}},[a("template",{slot:"title"},[e._t("label")],2),e._v(" "),"textarea"===e.type?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],ref:"textarea",staticClass:"mint-field-core",attrs:{placeholder:e.placeholder,rows:e.rows,disabled:e.disabled,readonly:e.readonly},domProps:{value:e.currentValue},on:{change:function(t){e.$emit("change",e.currentValue)},input:function(t){t.target.composing||(e.currentValue=t.target.value)}}}):a("input",{ref:"input",staticClass:"mint-field-core",attrs:{placeholder:e.placeholder,number:"number"===e.type,type:e.type,disabled:e.disabled,readonly:e.readonly},domProps:{value:e.currentValue},on:{change:function(t){e.$emit("change",e.currentValue)},focus:function(t){e.active=!0},input:e.handleInput}}),e._v(" "),e.disableClear?e._e():a("div",{directives:[{name:"show",rawName:"v-show",value:e.currentValue&&"textarea"!==e.type&&e.active,expression:"currentValue && type !== 'textarea' && active"}],staticClass:"mint-field-clear",on:{click:e.handleClear}},[a("i",{staticClass:"mintui mintui-field-error"})]),e._v(" "),e.state?a("span",{staticClass:"mint-field-state",class:["is-"+e.state]},[a("i",{staticClass:"mintui",class:["mintui-field-"+e.state]})]):e._e(),e._v(" "),a("div",{staticClass:"mint-field-other"},[e._t("default")],2)],2)},staticRenderFns:[]}},362:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(60),r=a.n(n),i=a(214),o=a.n(i),s=a(342),l=a(345),d=a(354),u=a.n(d),c=a(33),m=a(12),f=a(66),h=a(341),b=a(61);t.default={mixins:[s.a,l.a],components:{FbField:u.a},beforeRouteEnter:function(e,t,n){c.a.get().then(function(e){return e.json()}).then(function(e){n(function(t){e.data.content&&(t.contractInfoHasHistory=!0,o()(t.model,a.i(h.a)(e.data.content)),t.model.bankName=t.model.bank,t.bankCardForShow=t.model.bankCard.replace(/\d{4}(?=(\d{1,4}))/g,"$& "))})})},validators:{"model.bankCard":function(e){return this.validate(e).required("请输入银行卡号").custom(function(){if(!a.i(f.b)(e))return"请正确输入16-19位银行卡号"})},"model.bankPhone":function(e){return this.validate(e).required("请输入手机号").digit("请正确输入手机号").regex("^1[3-9]\\d{9}$","请正确输入手机号")},"model.bankName":function(e){return this.validate(e).required()}},watch:{bankCardForShow:function(){this.model.bankCard=this.bankCardForShow=this.bankCardForShow.replace(/\s/g,""),this.bankCardForShow=this.bankCardForShow.replace(/\d{4}(?=(\d{1,4}))/g,"$& ")}},methods:r()({},a.i(b.c)(["updateUser"]),{getBank:function(){var e=this;this.validation.isPassed("model.bankCard")&&c.b.get({bankCard:this.model.bankCard}).then(function(e){return e.json()}).then(function(t){e.model.bankName=t.data.bank,e.bankCardNotSupported=t.ret===m.a.BANK_CARD_NOT_SUPPORTED})},submit:function(){var e=this;if(this.bankCardNotSupported)return void this.$root.toast("抱歉，您选择的银行卡不支持！","error");this.$validate().then(function(t){t?c.c.save(e.model).then(function(e){return e.json()}).then(function(t){t.ret===m.a.OK&&(e.updateUser(o()({},e.user,e.model,{bank:e.model.bankName})),e.$router.push({name:"changeBankCardStep3"}))}):e.$root.toast(e.validation.firstError(),"error")})}}),computed:r()({},a.i(b.b)(["user"])),data:function(){return{bankCardNotSupported:!1,bankCardForShow:"",model:{bankCard:"",bankPhone:null,bankName:""}}}}},382:function(e,t,a){t=e.exports=a(324)(),t.push([e.i,"",""])},396:function(e,t,a){var n=a(382);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(325)("64da34aa",n,!0)},418:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("form",{staticClass:"change-bank-card-form",on:{submit:function(t){t.preventDefault(),e.submit()}}},[a("div",{staticClass:"fields-header"},[e._v("更新银行卡信息")]),a("div",{staticClass:"fields"},[a("fb-field",{directives:[{name:"mt-field-blur",rawName:"v-mt-field-blur",value:{blur:e.getBank},expression:"{blur:getBank}"}],attrs:{label:"银行卡号",placeholder:"请输入银行卡号",state:e.getFieldState("model.bankCard")},nativeOn:{click:function(t){e.showFieldError(t,"model.bankCard")}},model:{value:e.bankCardForShow,callback:function(t){e.bankCardForShow=t},expression:"bankCardForShow"}},[a("span",{slot:"label"},[e._v("银行卡号"),a("i",{staticClass:"iconfont ui-icon-info",on:{click:function(t){e.showSupportBanks()}}})])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.bankCard,expression:"model.bankCard"}],attrs:{type:"hidden"},domProps:{value:e.model.bankCard},on:{input:function(t){t.target.composing||(e.model.bankCard=t.target.value)}}}),a("mt-field",{attrs:{label:"银行预留手机号",placeholder:"请输入银行预留手机号",state:e.getFieldState("model.bankPhone")},nativeOn:{click:function(t){e.showFieldError(t,"model.bankPhone")}},model:{value:e.model.bankPhone,callback:function(t){e.model.bankPhone=t},expression:"model.bankPhone"}}),a("mt-cell",{attrs:{title:"开户行",value:e._f("fbFalse")(e.model.bankName)}})],1),a("div",{staticClass:"form-buttons"},[a("mt-button",{staticClass:"mint-button-block",attrs:{type:"primary",size:"large"}},[e._v("下一步")])],1)])])},staticRenderFns:[]}}});