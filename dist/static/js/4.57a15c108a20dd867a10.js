webpackJsonp([4,17],{332:function(n,e,t){t(386);var a=t(57)(t(352),t(408),null,null);n.exports=a.exports},341:function(n,e,t){"use strict";var a=t(60),r=t.n(a),o=r.a.Validator;e.a={methods:{Validator:o,validate:o.value,getFieldState:function(n){return this.validation.hasError(n)?"error":this.validation.isPassed(n)?"success":""},showFieldError:function(n,e){var t=n.target;t.classList.contains("mintui-field-error")&&t.parentNode.classList.contains("mint-field-state")&&this.$root.toast(this.validation.firstError(e),"error")}}}},352:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(214),r=t.n(a),o=t(58),i=t.n(o),s=t(341),d=t(33),l=t(12),u=t(62),m=t(59);t.n(m);e.default={mixins:[s.a],validators:{"model.bankCard":function(n){return this.validate(n).required("请输入银行卡号").custom(function(){if(!t.i(u.b)(n))return"请正确输入16-19位银行卡号"})},"model.bankPhone":function(n){return this.validate(n).required("请输入手机号").digit("请正确输入手机号").regex("^1[3-9]\\d{9}$","请正确输入手机号")},"model.bankName":function(n){return this.validate(n).required()}},watch:{bankCardForShow:function(){this.model.bankCard=this.bankCardForShow=this.bankCardForShow.replace(/\s/g,""),this.bankCardForShow=this.bankCardForShow.replace(/\d{4}(?=(\d{1,4}))/g,"$& ")}},methods:i()({},t.i(m.mapMutations)(["updateUser"]),{getBank:function(){var n=this;this.validation.isPassed("model.bankCard")&&d.a.get({bankCard:this.model.bankCard}).then(function(n){return n.json()}).then(function(e){n.model.bankName=e.data.bank,n.bankCardNotSupported=e.ret===l.a.BANK_CARD_NOT_SUPPORTED})},submit:function(){var n=this;return this.bankCardNotSupported?void this.$root.toast("抱歉，您选择的银行卡不支持！","error"):void this.$validate().then(function(e){e?d.b.save(n.model).then(function(n){return n.json()}).then(function(e){e.ret===l.a.OK&&(n.updateUser(r()({},n.user,{bank:n.model.bank},n.model)),n.$router.push({name:"changeBankCardStep3"}))}):n.$root.toast(n.validation.firstError(),"error")})}}),computed:i()({},t.i(m.mapGetters)(["user"])),data:function(){return{bankCardNotSupported:!1,bankCardForShow:"",model:{bankCard:"",bankPhone:null,bankName:""}}}}},372:function(n,e,t){e=n.exports=t(324)(),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"ChangeBankCardStep2.vue",sourceRoot:"webpack://"}])},386:function(n,e,t){var a=t(372);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(325)("370f5160",a,!0)},408:function(n,e){n.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("section",[t("form",{staticClass:"change-bank-card-form",on:{submit:function(e){e.preventDefault(),n.submit()}}},[t("div",{staticClass:"fields-header"},[n._v("更新银行卡信息")]),t("div",{staticClass:"fields"},[t("mt-field",{directives:[{name:"mt-field-blur",rawName:"v-mt-field-blur",value:{blur:n.getBank},expression:"{blur:getBank}"},{name:"model",rawName:"v-model",value:n.bankCardForShow,expression:"bankCardForShow"}],attrs:{label:"银行卡号",placeholder:"请输入银行卡号",state:n.getFieldState("model.bankCard")},domProps:{value:n.bankCardForShow},on:{input:function(e){n.bankCardForShow=e}},nativeOn:{click:function(e){n.showFieldError(e,"model.bankCard")}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:n.model.bankCard,expression:"model.bankCard"}],attrs:{type:"hidden"},domProps:{value:n._s(n.model.bankCard)},on:{input:function(e){e.target.composing||(n.model.bankCard=e.target.value)}}}),t("mt-field",{directives:[{name:"model",rawName:"v-model",value:n.model.bankPhone,expression:"model.bankPhone"}],attrs:{label:"银行预留手机号",placeholder:"请输入银行预留手机号",state:n.getFieldState("model.bankPhone")},domProps:{value:n.model.bankPhone},on:{input:function(e){n.model.bankPhone=e}},nativeOn:{click:function(e){n.showFieldError(e,"model.bankPhone")}}}),t("mt-cell",{attrs:{title:"开户行",value:n._f("fbFalse")(n.model.bankName)}})],1),t("div",{staticClass:"form-buttons"},[t("mt-button",{staticClass:"mint-button-block",attrs:{type:"primary",size:"large"}},[n._v("下一步")])],1)])])},staticRenderFns:[]}}});
//# sourceMappingURL=4.57a15c108a20dd867a10.js.map