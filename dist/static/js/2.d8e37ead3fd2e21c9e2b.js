webpackJsonp([2],{"+FvN":function(e,t,n){n("Ff29");var a=n("VU/8")(n("tswc"),n("ra35"),null,null);e.exports=a.exports},"/p9w":function(e,t,n){n("1I1N");var a=n("VU/8")(n("pFqE"),n("6X6c"),null,null);e.exports=a.exports},"1I1N":function(e,t,n){var a=n("8BBE");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("55209582",a,!0)},"4JGu":function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n("Dd8w"),o=n.n(a),r=n("Xxa5"),i=n.n(r),s=n("exGp"),c=n.n(s),d=n("oiih"),l=n("NYxO"),u=n("3dbI"),f=n("M4fF"),m=(n.n(f),[{name:"农业",icon:"nongye"},{name:"中国银行",icon:"zhongguo"},{name:"兴业",icon:"nongye"},{name:"工商",icon:"gongshang"},{name:"建设",icon:"jianshen"},{name:"交通",icon:"jiaotong"},{name:"北京",icon:"beijing"},{name:"民生银行",icon:"minsheng"},{name:"光大",icon:"guangda"},{name:"上海",icon:"shanghai"},{name:"中信",icon:"zhongxin"},{name:"浙商",icon:"zheshang"},{name:"邮政",icon:"youzhengchuxu"},{name:"华夏",icon:"huaxia"},{name:"渤海",icon:"bohai"},{name:"平安",icon:"pingan"},{name:"恒丰",icon:"hengfeng"},{name:"浦发",icon:"pufa"},{name:"招商",icon:"zhaoshang"},{name:"广发",icon:"guangfa"}]),b={methods:{getBankIcon:function(e){var t=n.i(f.find)(m,function(t){return~e.indexOf(t.name)});return(t?t.icon:"")+"yinhang"},showSupportBanks:function(){var e=this;return c()(i.a.mark(function t(){var n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.$store.getters.supportBankCards,!n.length){t.next=5;break}e.$msgBox("支持银行列表：",n.join("、")),t.next=10;break;case 5:return t.next=7,u.e.get().then(function(e){return e.json()});case 7:a=t.sent,e.$store.commit("updateSupportBankCards",a.data),e.$msgBox("支持银行列表：",a.data.join("、"));case 10:case"end":return t.stop()}},t,e)}))()}}};t.b={methods:o()({},n.i(l.a)(["getMsgCode"]),b.methods,{getBank:function(){var e=this;return c()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.validation.isPassed("model.bankCard")&&setTimeout(c()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.f.get({cardNo:e.model.bankCard}).then(function(e){return e.json()});case 2:n=t.sent,n.code===d.a.OK?(e.model.bankName=n.data.bankName,e.model.bankCode=n.data.bankCode):(e.model.bankName="自动生成",e.model.bankCode=""),e.bankCardNotSupported=n.code===d.a.BANK_CARD_NOT_SUPPORTED,e.$validate("model.bankCard");case 6:case"end":return t.stop()}},t,e)})),100);case 1:case"end":return t.stop()}},t,e)}))()},toGetMsgCode:function(){var e=this;return c()(i.a.mark(function t(){var a,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validate(e.validatePhoneModel);case 2:if(!(a=t.sent)){t.next=10;break}return t.next=6,e.getMsgCode({phone:n.i(f.get)(e,e.validatePhoneModel),label:e.$route.meta.captchaSendType||""});case 6:o=t.sent,o.code===d.a.OK&&(e.countdownVisible=!0,e.$refs.fnCountdown.start()),t.next=11;break;case 10:e.$toast(e.validation.firstError(e.validatePhoneModel),"error");case 11:case"end":return t.stop()}},t,e)}))()},onCountdownOver:function(){this.countdownVisible=!1}}),watch:{bankCardForShow:function(){this.model.bankCard=this.bankCardForShow=this.bankCardForShow.replace(/\s/g,""),this.bankCardForShow=this.bankCardForShow.replace(/\d{4}(?=(\d{1,4}))/g,"$& ")},"model.bankCard":function(){this.bankCardNotSupported=!1}},data:function(){return{bankCardForShow:"",bankCardNotSupported:!1,validatePhoneModel:"user.phone",countdownVisible:!1}}}},"5zde":function(e,t,n){n("zQR9"),n("qyJz"),e.exports=n("FeBl").Array.from},"6X6c":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"fb-bank-cards"},[e._m(0),n("div",{staticClass:"fields"},[n("div",{staticClass:"cells"},[n("mt-cell",{staticClass:"pt10",attrs:{"is-link":"is-link"},nativeOn:{click:function(t){e.$router.push({name:"bankList"})}}},[n("div",{staticClass:"content",slot:"title"},[n("div",{staticClass:"content-icon"},[n("fb-icon",{attrs:{name:e.getBankIcon(e.defaultBankCard.bankName)}})],1),n("div",{staticClass:"content-body"},[n("div",{staticClass:"title"},[n("h3",[e._v(e._s(e.defaultBankCard.bankName))])]),n("p",[e._v(e._s(e._f("fbBankCardSpace")(e.defaultBankCard.bankCard)))])])])])],1),n("router-link",{staticClass:"add-bankcard",attrs:{to:{name:"addBankStep1",params:{transitionName:"slideRightFade"}}}},[n("em",[e._v("+")]),e._v("添加银行卡")])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fields-header"},[n("i",{staticClass:"iconfont icon-bank-card3"}),e._v("银行账户")])}]}},"8BBE":function(e,t,n){t=e.exports=n("FZ+f")(),t.push([e.i,".fb-bank-cards .add-bankcard{font-size:15px;padding:15px 10px;text-align:center;background:#fff;color:inherit;display:block;background-image:linear-gradient(0deg,#d9d9d9,#d9d9d9 50%,transparent 0);background-size:100% 1px;background-repeat:no-repeat;background-position:top}.fb-bank-cards .add-bankcard.no-border{background-image:none}.fb-bank-cards .add-bankcard:active{background:#f2f2f2}.fb-bank-cards .add-bankcard em{font-size:1.2em;margin-right:.2em}.fb-bank-cards .mint-cell:active{background-color:#f2f2f2}.fb-bank-cards .mint-cell-mask{display:none}.fb-bank-cards .mint-radiolist-label{padding:0 0 12px 2px;font-size:14px;margin-top:-5px;float:left;color:#4790fe}.fb-bank-cards .mint-radio-input:checked+.mint-radio-core{background-color:#4790fe;border-color:#4790fe}.fb-bank-cards .mint-radio-label{color:#4790fe}.fb-bank-cards .mint-radio-core{border-color:#4790fe}.fb-bank-cards .title{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.fb-bank-cards .content-icon{padding-right:19px}.fb-bank-cards .content-icon .icon-svg{width:39px;height:39px}.fb-bank-cards .content{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-ms-flex-align:center;align-items:center;line-height:1.8em;font-size:14px;overflow:hidden;padding:10px 0}.fb-bank-cards .content h3{-webkit-flex:1;-ms-flex:1;flex:1;font-size:15px;font-weight:400}.fb-bank-cards .content p{overflow:hidden;text-overflow:ellipsis;color:#666}",""])},Ff29:function(e,t,n){var a=n("o0et");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("67a60113",a,!0)},Gu7T:function(e,t,n){"use strict";t.__esModule=!0;var a=n("c/Tr"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},"c/Tr":function(e,t,n){e.exports={default:n("5zde"),__esModule:!0}},fBQ2:function(e,t,n){"use strict";var a=n("evD5"),o=n("X8DO");e.exports=function(e,t,n){t in e?a.f(e,t,o(0,n)):e[t]=n}},nWjG:function(e,t,n){"use strict";var a=n("IXCS"),o=n.n(a),r=o.a.Validator;t.a={methods:{Validator:r,validate:r.value,getFieldState:function(e){return this.validation.hasError(e)?"error":this.validation.isPassed(e)?"success":""},showFieldError:function(e,t){var n=e.target;n.classList.contains("mintui-field-error")&&n.parentNode.classList.contains("mint-field-state")&&this.$toast(this.validation.firstError(t),"error")}}}},o0et:function(e,t,n){t=e.exports=n("FZ+f")(),t.push([e.i,'.shiyi-option-msgbox h3,.shiyi-option-msgbox h4{font-weight:400;font-size:16px}.shiyi-option-msgbox .mint-msgbox-btns{height:auto;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.shiyi-option-msgbox .mint-msgbox-btn{line-height:1em;padding:12px 0}.shiyi-option-msgbox .mint-msgbox-cancel,.shiyi-option-msgbox .mint-msgbox-confirm{border-right:0;width:100%;color:#4790fe}.shiyi-option-msgbox .mint-msgbox-cancel small,.shiyi-option-msgbox .mint-msgbox-confirm small{color:#4790fe}.shiyi-option-msgbox .mint-msgbox-cancel{border-bottom:1px solid #d9d9d9}.borrow-info .icon-sale7{color:#f44336;font-size:12px;display:inline-block;padding:1px 5px;border:1px solid #f44336;border-radius:4px}.borrow-info .icon-sale7:before{border:1px solid #f44336}.borrow-info .icon-sale7:after{font-size:12px;content:"7\\6298"}.borrow-info .loan-agreement{margin-top:5px}.borrow-info small.note{display:block;padding:10px;color:#888;line-height:1.8em}',""])},pFqE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),o=n.n(a),r=n("exGp"),i=n.n(r),s=n("3dbI"),c=n("4JGu"),d=n("oiih"),l=n("M4fF");n.n(l);t.default={mixins:[c.a],mounted:function(){var e=this;return i()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.d.get().then(function(e){return e.json()});case 2:a=t.sent,a.code===d.a.OK&&(e.defaultBankCard=n.i(l.find)(a.data.bankCards,function(e){return e.isDefault}),e.$store.commit("updateBankCardsCount",a.data.bankCards.length));case 4:case"end":return t.stop()}},t,e)}))()},data:function(){return{defaultBankCard:{bankName:"",bankCard:""}}}}},qyJz:function(e,t,n){"use strict";var a=n("+ZMJ"),o=n("kM2E"),r=n("sB3e"),i=n("msXi"),s=n("Mhyx"),c=n("QRG4"),d=n("fBQ2"),l=n("3fs2");o(o.S+o.F*!n("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,u,f=r(e),m="function"==typeof this?this:Array,b=arguments.length,p=b>1?arguments[1]:void 0,h=void 0!==p,v=0,k=l(f);if(h&&(p=a(p,b>2?arguments[2]:void 0,2)),void 0==k||m==Array&&s(k))for(t=c(f.length),n=new m(t);t>v;v++)d(n,v,h?p(f[v],v):f[v]);else for(u=k.call(f),n=new m;!(o=u.next()).done;v++)d(n,v,h?i(u,p,[o.value,v],!0):o.value);return n.length=v,n}})},ra35:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"borrow-info"},[n("form",{staticClass:"borrow-form",on:{submit:function(t){t.preventDefault(),e.submit()}}},[n("section",[e._m(0),n("div",{staticClass:"fields"},[n("mt-cell",{attrs:{title:"借款金额",value:e._f("fbCurrency")(e.product.amount)}}),n("mt-cell",{attrs:{title:"借款天数",value:e._f("fbAppend")(e.product.loanDays,"天")}}),n("mt-cell",{attrs:{value:e._f("fbCurrency")(e.product.serviceFee-e.product.discountAmount)}},[n("span",{slot:"title"},[e._v("服务费"),n("i",{staticClass:"iconfont icon-wenhao",on:{click:e.showServiceChargeTip}}),n("span",{directives:[{name:"show",rawName:"v-show",value:"vocation"===e.borrowOption,expression:"borrowOption === 'vocation'"}],staticClass:"icon-sale7"})])]),n("mt-cell",{attrs:{title:"实际到账",value:e._f("fbCurrency")(e.virtualMoney)}})],1)]),e.contractInfoHasHistory?n("fb-bank-cards"):e._e(),e.contractInfoHasHistory?e._e():n("section",[e._m(1),n("div",{staticClass:"fields"},[e.user.name?n("mt-cell",{attrs:{title:"姓名",value:e._f("fbFalse")(e.model.name)}}):e._e(),e.user.name?e._e():n("mt-field",{attrs:{label:"姓名",placeholder:"请输入真实姓名",state:e.getFieldState("model.name")},nativeOn:{click:function(t){e.showFieldError(t,"model.name")}},model:{value:e.model.name,callback:function(t){e.model.name=t},expression:"model.name"}}),n("mt-field",{attrs:{label:"身份证号",placeholder:"请输入身份证号",state:e.getFieldState("model.idCard")},nativeOn:{click:function(t){e.showFieldError(t,"model.idCard")}},model:{value:e.model.idCard,callback:function(t){e.model.idCard=t},expression:"model.idCard"}}),n("fb-field",{directives:[{name:"mt-field-blur",rawName:"v-mt-field-blur",value:{blur:e.getBank},expression:"{blur:getBank}"}],attrs:{label:"银行卡号",placeholder:"请输入银行卡号",state:e.getFieldState("model.bankCard")},nativeOn:{click:function(t){e.showFieldError(t,"model.bankCard")}},model:{value:e.bankCardForShow,callback:function(t){e.bankCardForShow=t},expression:"bankCardForShow"}},[n("span",{slot:"label"},[e._v("银行卡号"),n("i",{staticClass:"iconfont icon-wenhao",on:{click:function(t){e.showSupportBanks()}}})])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model.bankCard,expression:"model.bankCard"}],attrs:{type:"hidden"},domProps:{value:e.model.bankCard},on:{input:function(t){t.target.composing||(e.model.bankCard=t.target.value)}}}),n("mt-cell",{staticClass:"field-cell",class:{empty:"自动匹配"===e.model.bankName},attrs:{title:"开户行",value:e.model.bankName}})],1),n("div",{staticClass:"fields-header"}),n("div",{staticClass:"fields"},[n("mt-field",{attrs:{label:"银行预留手机号",placeholder:"请输入银行预留手机号",state:e.getFieldState("model.bankReservePhone")},nativeOn:{click:function(t){e.showFieldError(t,"model.bankReservePhone")}},model:{value:e.model.bankReservePhone,callback:function(t){e.model.bankReservePhone=t},expression:"model.bankReservePhone"}}),n("mt-field",{attrs:{label:"验证码",placeholder:"请输入验证码",state:e.getFieldState("model.captcha")},nativeOn:{click:function(t){e.showFieldError(t,"model.captcha")}},model:{value:e.model.captcha,callback:function(t){e.model.captcha=t},expression:"model.captcha"}},[n("mt-button",{attrs:{type:"default",disabled:e.countdownVisible},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.toGetMsgCode()}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.countdownVisible,expression:"!countdownVisible"}]},[e._v("获取验证码")]),n("fb-countdown",{directives:[{name:"show",rawName:"v-show",value:e.countdownVisible,expression:"countdownVisible"}],ref:"fnCountdown",on:{"countdown-over":function(t){e.onCountdownOver()}}})],1)],1)],1)]),n("div",{staticClass:"form-buttons"},[n("mt-button",{staticClass:"mint-button-block",attrs:{type:"primary",size:"large"}},[e._v("立即提款")])],1)],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fields-header"},[n("i",{staticClass:"iconfont icon-fangan"}),e._v("借款方案")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fields-header"},[n("i",{staticClass:"iconfont icon-user-solid"}),e._v("账户信息"),n("small",{staticClass:"pl5"},[e._v("请填写您的真实信息，否则会影响借款。")])])}]}},tswc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),o=n.n(a),r=n("Gu7T"),i=n.n(r),s=n("Dd8w"),c=n.n(s),d=n("Xxa5"),l=n.n(d),u=n("woOf"),f=n.n(u),m=n("exGp"),b=n.n(m),p=n("nWjG"),h=n("4JGu"),v=n("3dbI"),k=n("oiih"),g=n("JaHG"),x=n("NYxO"),C=n("IcnI"),w=n("PJh5"),y=n.n(w),_=n("M4fF"),F=(n.n(_),n("I3G/")),N=n.n(F),O=n("/p9w"),S=n.n(O);t.default={mixins:[p.a,h.b],components:{FbBankCards:S.a},beforeRouteEnter:function(e,t,a){var o=this;return b()(l.a.mark(function e(){var t,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=C.a.getters.user,t.currentOngoingContract&&t.currentOngoingContract.id){e.next=4;break}return a(),e.abrupt("return");case 4:return e.next=6,v.a.get({id:t.currentOngoingContract.id}).then(function(e){return e.json()});case 6:r=e.sent,a(function(e){r.data&&(e.contractInfoHasHistory=!0,f()(e.model,n.i(_.pick)(r.data,["idCard","bankCard","bankName","bankReservePhone"])),e.bankCardForShow=e.model.bankCard.replace(/\d{4}(?=(\d{1,4}))/g,"$& "))});case 8:case"end":return e.stop()}},e,o)}))()},mounted:function(){},validators:{"model.name":function(e){return this.validate(e).required("请输入您的姓名")},"model.idCard":function(e){return this.validate(e).required("请输入身份证号").length(18,"请正确输入18位身份证").custom(function(){if(!n.i(g.c)(e))return"请正确输入二代18位身份证"})},"model.bankCard":function(e){var t=this;return this.validate(e).required("请输入银行卡号").custom(function(){return t.bankCardNotSupported?"抱歉，您选择的银行卡不支持！":n.i(g.d)(e)?void 0:"请正确输入16-19位银行卡号"})},"model.bankReservePhone":function(e){return this.validate(e).required("请输入手机号").digit("请正确输入手机号").regex("^1[3-9]\\d{9}$","请正确输入手机号")},"model.bankName":function(e){return this.validate(e).required()},"model.captcha":function(e){return this.validate(e).required("请输入验证码").length(6,"请正确输入验证码")}},methods:c()({},n.i(x.c)(["updateStateCode","updateOnGoingContractId"]),{showServiceChargeTip:function(){this.$msgBox("服务费包含",'\n        <table>\n          <tr><th>审核费用：</th><td style="text-align:left;">'+N.a.filter("fbCurrency")(this.product.creditFee)+'</td></tr>\n          <tr><th>账户管理费：</th><td style="text-align:left;">'+N.a.filter("fbCurrency")(this.product.manageFee)+"</td></tr>\n        </table>")},_vocationJudge:function(e){return _.inRange.apply(void 0,[+this.now].concat(i()(e)))},_vocationRepayDateGet:function(){return{"0917":"10月10日","0918":"10月11日","0919":"10月12日","0920":"10月13日","0921":"10月17日","0922":"10月18日","0923":"10月19日","0924":"10月20日"}[y()(this.now).format("MMDD")]||""},_vocationRepayDaysGet:function(){return{"10月10日":23,"10月11日":23,"10月12日":23,"10月13日":23,"10月17日":26,"10月18日":26,"10月19日":26,"10月20日":26}[this.vocationRepayDate]||0},submit:function(){var e=this;return b()(l.a.mark(function t(){var n,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,e.contractInfoHasHistory){t.next=16;break}return t.next=4,e.$validate();case 4:if(!(a=t.sent)){t.next=12;break}return"vocation"===e.borrowOption&&(e.model.agreementDays=e.vocationRepayDays),t.next=9,v.j.save(e.model).then(function(e){return e.json()});case 9:n=t.sent,t.next=14;break;case 12:return e.$toast(e.validation.firstError(),"error"),t.abrupt("return");case 14:t.next=25;break;case 16:if(e.stateCode!==k.b.CONTRACT_INFO_FILLED){t.next=22;break}return t.next=19,v.k.save({contractId:e.user.currentOngoingContract.id,productId:e.model.productId}).then(function(e){return e.json()});case 19:n=t.sent,t.next=25;break;case 22:return t.next=24,v.l.save({productId:e.model.productId}).then(function(e){return e.json()});case 24:n=t.sent;case 25:n.code===k.a.OK&&(e.updateStateCode(k.b.CONTRACT_INFO_FILLED),e.contractInfoHasHistory||e.$store.commit("updateUserName",e.model.name),n.data.contractId&&e.updateOnGoingContractId(n.data.contractId),e.$router.push({name:"signature"}));case 26:case"end":return t.stop()}},t,e)}))()}}),computed:c()({},n.i(x.b)(["stateCode","now"]),{virtualMoney:function(){return this.product.amount-(this.product.serviceFee-this.product.discountAmount)}}),data:function(){var e=JSON.parse(o()(this.$store.getters.user)),t=e.productInfo[0];return{contractInfoHasHistory:!1,validatePhoneModel:"model.bankReservePhone",borrowOption:"normal",repayDate:"",vocationRepayDate:"",vocationRepayDays:t.loanDays,product:t,model:{productId:t.id,name:e.name,idCard:e.idCard,bankCard:null,captcha:"",bankName:"自动匹配",bankReservePhone:null},user:e}}}}});